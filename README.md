# Архитектура высоконагруженных система. ДЗ №2
## Создание сервиса погоды в docker


## Цель:
> 1. Завернуть в docker созданный в первой лабораторной работе погодный сервис.
> > Создать погодный сервис, который умеет отвечать на запрос пользователя по определенным адресам. Сервис должен быть развернут на Linux-системе. Иметь возможность сообщать текущую погоду в указанном городе, и погоду в указанном городе в указанное время.
> 2. Написать программу, запускающую другие в контейнере (поддержать изоляцию hostname, файловой системы, сети, pid). Поддержать лимитирование по памяти. Реализовать с нуля без использования инструментов контейнеризации.


## Инструкция по установке:
1. Скачать/стянуть репозиторий
1. Перейти в папку репозитория
1. Выполнить команду `docker build -t <название образа> -f dockerfile . `, мною для работы используется исходный образ ubuntu, который дополнен наличием python'a. Поэтому для создания образа использую команду `docker build -t ubuntu/archhightload_laba2 -f dockerfile .`
1. Выполнить команду `docker run -it --name <название контейнера> -p 127.0.0.1:<порт>:8000 ubuntu/archhightload_laba2` для создания docker-контейнера из docker-образа. `docker run -it --name laba2_archHL -p 127.0.0.1:5024:8000 ubuntu/archhightload_laba2`
1. Выполняем запрос на хостовой машине
  * Либо переходим в браузер [сюда](http://127.0.0.1:5024)
  * Либо выполняем команду из терминала 
    * `curl http://127.0.0.1:<порт>/v1/current/?city=<название города на английском>`
  	* `curl "http://127.0.0.1:<порт>/v1/forecast/?city=<название города на английском>&timestamp=<список доступных команд приведен ниже>"`
  	  * `1h` - чтобы увидеть прогноз погоды на 1 час вперед
  	  * `3h` - чтобы увидеть прогноз погоды на 3 часа вперед
  	  * `tomorrow` - чтобы увидеть прогноз погоды на завтра в это же время
  	  * `yesterday` - чтобы увидеть какая погода была вчера в это же время
1. Сборку второй части задания можно выполнить из исходного кода выполнением команды `gcc second_part.c -o nedoDocker`, либо сразу используя добавленный в репозиторий исполняемый файл
1. Запускать собранный файл необходимо с правами суперпользователя, командой `sudo ./nedoDocker`


## Инструментарий:
- GIT (устанавливается командой `sudo apt install git -y`)
- Docker (устанавливается командой `sudo apt install -y docker-ce`) [дополнительная инструкция](https://losst.ru/ustanovka-docker-na-ubuntu-16-04)
- GCC (устанавливается командой `sudo apt install build-essential`) [дополнительная инструкция](https://losst.ru/ustanovka-gcc-v-ubuntu-16-04)